// app global css in SCSS form

// 字体大小控制
:root {
  --font-scale: 1.0;
}

// Theme-aware header colors
// Quasar automatically adjusts header background in light/dark mode
// We ensure text color adapts accordingly
.q-header {
  // Let Quasar handle background color
  
  // Ensure toolbar title is readable
  .q-toolbar-title {
    color: inherit; // Inherit from Quasar's theme
  }
}

// Drawer menu and dropdown menus - ensure text is readable in both themes
// In dark mode, Quasar adds .body--dark or .dark class to body
.body--dark,
.dark {
  .q-drawer,
  .q-menu {
    .q-list {
      .q-item {
        color: rgba(255, 255, 255, 0.87) !important;
        
        .q-item__label {
          color: rgba(255, 255, 255, 0.87) !important;
        }
        
        .q-item__label--caption {
          color: rgba(255, 255, 255, 0.6) !important;
        }
        
        &.q-item--active {
          color: white !important;
          
          .q-item__label {
            color: white !important;
          }
        }
        
        .q-icon {
          color: inherit !important;
        }
      }
    }
  }
}

// In light mode, use default colors (dark text on light background)
.body--light {
  .q-drawer,
  .q-menu {
    .q-list {
      .q-item {
        color: rgba(0, 0, 0, 0.87);
        
        .q-item__label {
          color: rgba(0, 0, 0, 0.87);
        }
        
        .q-item__label--caption {
          color: rgba(0, 0, 0, 0.6);
        }
      }
    }
  }
}

// Dropdown menus (font size, theme, language) - ensure text is readable in both themes
.q-menu {
  // In light mode, ensure dark text
  .body--light & {
    .q-item {
      color: rgba(0, 0, 0, 0.87);
      
      .q-item__label {
        color: rgba(0, 0, 0, 0.87);
      }
      
      .q-item__label--caption {
        color: rgba(0, 0, 0, 0.6);
      }
    }
  }
  
  // In dark mode, ensure light text
  .body--dark &,
  .dark & {
    .q-item {
      color: rgba(255, 255, 255, 0.87);
      
      .q-item__label {
        color: rgba(255, 255, 255, 0.87);
      }
      
      .q-item__label--caption {
        color: rgba(255, 255, 255, 0.6);
      }
    }
  }
}

// Font size control - ensure selected item is visible in both modes
.body--dark,
.dark {
  .font-size-control {
    .q-list {
      .q-item {
        // Selected item with bg-grey-8 should have white text
        &.bg-grey-8 {
          color: rgba(255, 255, 255, 0.87) !important;
          
          .q-item__label {
            color: rgba(255, 255, 255, 0.87) !important;
          }
          
          .q-item__label--caption {
            color: rgba(255, 255, 255, 0.6) !important;
          }
        }
      }
    }
  }
}

.body--light {
  .font-size-control {
    .q-list {
      .q-item {
        // Selected item with bg-grey-2 should have dark text
        &.bg-grey-2 {
          color: rgba(0, 0, 0, 0.87) !important;
          
          .q-item__label {
            color: rgba(0, 0, 0, 0.87) !important;
          }
          
          .q-item__label--caption {
            color: rgba(0, 0, 0, 0.6) !important;
          }
        }
      }
    }
  }
}

// 字体大小类
.font-size-small {
  --font-scale: 0.875;
}

.font-size-medium {
  --font-scale: 1.0;
}

.font-size-large {
  --font-scale: 1.125;
}

// Theme-aware body background with improved contrast
body {
  font-size: calc(14px * var(--font-scale));
  
  // Light theme: bright white background with dark text
  &.body--light,
  &[data-theme="light"],
  &:not(.dark):not(.body--dark) {
    background-color: #ffffff !important;
    color: #000000 !important;
    
    // Ensure cards have proper contrast
    .q-card {
      background-color: #ffffff !important;
      color: #212121 !important;
    }
    
    // Ensure text is dark
    .text-dark,
    .text-grey-10,
    .text-grey-9,
    .text-grey-8 {
      color: #212121 !important;
    }
  }
  
  // Dark theme: very dark background with light text - enhanced contrast
  &.body--dark,
  &.dark,
  &[data-theme="dark"] {
    background-color: #121212 !important; // Material Design dark theme
    color: #ffffff !important;
    
    // Ensure cards have lighter dark background for contrast
    .q-card {
      background-color: #1e1e1e !important;
      color: #ffffff !important;
    }
    
    // Ensure surface elements are visible
    .q-card-section {
      background-color: #1e1e1e !important;
    }
    
    // Ensure text is light
    .text-dark {
      color: #ffffff !important;
    }
  }
}

// Ensure html element also respects theme
html {
  &[data-theme="light"],
  &:not(.dark) {
    background-color: #ffffff !important;
  }
  
  &[data-theme="dark"],
  &.dark {
    background-color: #121212 !important; // Material Design dark theme
  }
}

// Ensure page container respects theme - improved contrast
.q-page-container {
  // Light mode: white background
  .body--light &,
  [data-theme="light"] &,
  html:not(.dark) & {
    background-color: #ffffff !important;
  }
  
  // Dark mode: dark background
  .body--dark &,
  .dark &,
  [data-theme="dark"] &,
  html.dark & {
    background-color: #121212 !important; // Material Design dark theme
  }
}

// Ensure q-page also respects theme
.q-page {
  background-color: #f5f5f5 !important;
  
  .body--light &,
  [data-theme="light"] &,
  html:not(.dark) & {
    background-color: transparent !important;
  }
  
  .body--dark &,
  .dark &,
  [data-theme="dark"] &,
  html.dark & {
    background-color: transparent !important;
  }
}

// 响应式字体大小调整
.q-btn {
  font-size: calc(14px * var(--font-scale));
}

.q-input {
  font-size: calc(14px * var(--font-scale));
}

.q-card {
  font-size: calc(14px * var(--font-scale));
}

// 标题字体大小调整
.text-h1 { font-size: calc(2.5rem * var(--font-scale)) !important; }
.text-h2 { font-size: calc(2rem * var(--font-scale)) !important; }
.text-h3 { font-size: calc(1.75rem * var(--font-scale)) !important; }
.text-h4 { font-size: calc(1.5rem * var(--font-scale)) !important; }
.text-h5 { font-size: calc(1.25rem * var(--font-scale)) !important; }
.text-h6 { font-size: calc(1rem * var(--font-scale)) !important; }
.text-subtitle1 { font-size: calc(1rem * var(--font-scale)) !important; }
.text-subtitle2 { font-size: calc(0.875rem * var(--font-scale)) !important; }
.text-body1 { font-size: calc(1rem * var(--font-scale)) !important; }
.text-body2 { font-size: calc(0.875rem * var(--font-scale)) !important; }
.text-caption { font-size: calc(0.75rem * var(--font-scale)) !important; }
.text-overline { font-size: calc(0.75rem * var(--font-scale)) !important; }
// You can inject variables here to use across your app