# P0ä¿®å¤ - ä¸‹ä¸€æ­¥æ“ä½œæŒ‡å—

**æ—¥æœŸ**: 2025-01-04  
**çŠ¶æ€**: âœ… **ä»£ç é‡æ„å®Œæˆï¼Œéœ€è¦å®‰è£…ä¾èµ–å’Œæ„å»º**

---

## ğŸš€ ç«‹å³æ‰§è¡Œæ­¥éª¤

### 1. å®‰è£…å’Œæ„å»ºæ–°åŒ…

```bash
# 1. å®‰è£… core-engine
cd packages/core-engine
npm install
npm run build

# 2. å®‰è£… plugin-cec-8-200
cd ../plugin-cec-8-200
npm install
npm run build

# 3. å®‰è£…å‰ç«¯ä¾èµ–
cd ../../frontend
npm install

# 4. å®‰è£…åç«¯ä¾èµ–
cd ../services/calculation-service
npm install
npm run build
```

---

## âš ï¸ å¯èƒ½é‡åˆ°çš„é—®é¢˜

### é—®é¢˜1: æ¨¡å—è§£æé”™è¯¯

**ç—‡çŠ¶**: `Cannot find module '@tradespro/core-engine'`

**è§£å†³**:
1. ç¡®ä¿æ‰€æœ‰åŒ…éƒ½å·²å®‰è£…ä¾èµ– (`npm install`)
2. ç¡®ä¿æ‰€æœ‰åŒ…éƒ½å·²æ„å»º (`npm run build`)
3. æ£€æŸ¥ `package.json` ä¸­çš„ `exports` å­—æ®µæ˜¯å¦æ­£ç¡®

### é—®é¢˜2: TypeScript ç¼–è¯‘é”™è¯¯

**ç—‡çŠ¶**: ç±»å‹å¯¼å…¥é”™è¯¯

**è§£å†³**:
1. ç¡®ä¿ `tsconfig.json` é…ç½®æ­£ç¡®
2. æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®
3. è¿è¡Œ `npm run build` ç”Ÿæˆç±»å‹å®šä¹‰

### é—®é¢˜3: å‰ç«¯è¡¨æ ¼åŠ è½½å¤±è´¥

**ç—‡çŠ¶**: `Table2: Object` ä½† `entries: Array(0)`

**è§£å†³**:
1. è¿è¡Œ `npm run copy:tables` åŒæ­¥è¡¨æ ¼
2. æ£€æŸ¥ `frontend/public/data/tables/2024/` æ˜¯å¦å­˜åœ¨æ–‡ä»¶
3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ç½‘ç»œè¯·æ±‚

---

## ğŸ“‹ éªŒè¯æ¸…å•

### Core Engine
- [ ] `packages/core-engine` å·²æ„å»º (`npm run build`)
- [ ] `dist/` ç›®å½•å­˜åœ¨ä¸”åŒ…å«ç¼–è¯‘æ–‡ä»¶
- [ ] ç±»å‹å®šä¹‰æ–‡ä»¶å­˜åœ¨ (`dist/index.d.ts`)

### Plugin
- [ ] `packages/plugin-cec-8-200` å·²æ„å»º (`npm run build`)
- [ ] `dist/` ç›®å½•å­˜åœ¨ä¸”åŒ…å«ç¼–è¯‘æ–‡ä»¶
- [ ] `data/tables/2024/` ç›®å½•å­˜åœ¨ä¸”åŒ…å«JSONæ–‡ä»¶

### å‰ç«¯
- [ ] ä¾èµ–å·²å®‰è£… (`npm install`)
- [ ] è¡¨æ ¼å·²åŒæ­¥ (`npm run copy:tables`)
- [ ] å¯ä»¥æ­£å¸¸å¯åŠ¨ (`npm run dev`)
- [ ] ç¦»çº¿è®¡ç®—åŠŸèƒ½æ­£å¸¸

### åç«¯
- [ ] ä¾èµ–å·²å®‰è£… (`npm install`)
- [ ] å·²æ„å»º (`npm run build`)
- [ ] å¯ä»¥æ­£å¸¸å¯åŠ¨ (`npm start`)
- [ ] è®¡ç®—ç«¯ç‚¹æ­£å¸¸å·¥ä½œ

---

## ğŸ” æµ‹è¯•æ­¥éª¤

### æµ‹è¯•å‰ç«¯ç¦»çº¿è®¡ç®—

1. å¯åŠ¨å‰ç«¯: `cd frontend && npm run dev`
2. æ‰“å¼€æµè§ˆå™¨: `http://localhost:9000`
3. å¡«å†™è¡¨å•å¹¶ç‚¹å‡»"è®¡ç®—"
4. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   - `âœ… CEC Single Dwelling Plugin loaded`
   - `âœ… Plugin registered: cec-single-dwelling-2024 v1.0.0`
   - è®¡ç®—ç»“æœæ­£å¸¸æ˜¾ç¤º

### æµ‹è¯•åç«¯è®¡ç®—æœåŠ¡

1. å¯åŠ¨åç«¯: `cd services/calculation-service && npm start`
2. æµ‹è¯•ç«¯ç‚¹:
   ```bash
   curl -X POST http://localhost:3001/api/calculate/single-dwelling \
     -H "Content-Type: application/json" \
     -d '{"systemVoltage": 240, "livingArea_m2": 150}'
   ```
3. æ£€æŸ¥å“åº”ï¼Œåº”è¯¥è¿”å›è®¡ç®—ç»“æœ

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### Table Manager ä½ç½®

å½“å‰ `tableManager` ä»ç„¶åœ¨ `@tradespro/calculation-engine` ä¸­ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå› ä¸ºï¼š
- I/O éƒ¨åˆ†å·²ç»åˆ†ç¦»ï¼ˆnode/browser ç‰ˆæœ¬ï¼‰
- ç¬¦åˆV5æ¶æ„çš„"å®¿ä¸»è´Ÿè´£I/O"åŸåˆ™
- æœªæ¥å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–

### å‘åå…¼å®¹

- `@tradespro/calculation-engine` ä»ç„¶å­˜åœ¨ï¼Œæä¾›å‘åå…¼å®¹
- æ—§çš„ç›´æ¥è°ƒç”¨æ–¹å¼ä»ç„¶å¯ç”¨ï¼ˆä½†ä¸æ¨èï¼‰
- æ–°ä»£ç åº”è¯¥ä½¿ç”¨æ’ä»¶ç³»ç»Ÿ

---

## âœ… å®Œæˆæ ‡å¿—

å½“ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶æ»¡è¶³æ—¶ï¼ŒP0ä¿®å¤å®Œæˆï¼š

1. âœ… æ‰€æœ‰åŒ…æ„å»ºæˆåŠŸ
2. âœ… å‰ç«¯å¯ä»¥æ­£å¸¸å¯åŠ¨å¹¶ä½¿ç”¨æ’ä»¶ç³»ç»Ÿ
3. âœ… åç«¯å¯ä»¥æ­£å¸¸å¯åŠ¨å¹¶ä½¿ç”¨æ’ä»¶ç³»ç»Ÿ
4. âœ… è®¡ç®—ç»“æœä¸ä¹‹å‰ä¸€è‡´
5. âœ… æ²¡æœ‰ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯

---

**çŠ¶æ€**: âœ… **ä»£ç é‡æ„å®Œæˆ - ç­‰å¾…å®‰è£…ä¾èµ–å’Œæµ‹è¯•**






